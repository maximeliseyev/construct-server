# Database configuration
DATABASE_URL="postgresql://user:password@host:port/database"

# Redis configuration
REDIS_URL=redis://127.0.0.1:6379

# Server configuration
# Port to bind the WebSocket server (default: 8080)
PORT=8080

# JWT Secret for signing authentication tokens
# THIS MUST BE AT LEAST 32 CHARACTERS LONG AND KEPT SECRET
JWT_SECRET=

# Salt for hashing user identifiers in logs
# THIS MUST BE A UNIQUE, SECRET VALUE. DO NOT USE THE DEFAULT VALUE.
LOG_HASH_SALT=

# Message queue TTL in days (default: 7)
# How long offline messages are stored in Redis before expiring
MESSAGE_TTL_DAYS=7

# Rate Limiting & Security
MAX_MESSAGES_PER_HOUR=1000        # Maximum messages per user per hour
MAX_KEY_ROTATIONS_PER_DAY=10      # Maximum key rotations per user per day
MAX_PASSWORD_CHANGES_PER_DAY=5    # Maximum password changes per user per day
MAX_FAILED_LOGIN_ATTEMPTS=5       # Maximum failed login attempts before 15-minute lockout
DELIVERY_POLL_INTERVAL_MS=10000

# Delivery Worker Configuration
ONLINE_CHANNEL=user_online_notifications  # Redis Pub/Sub channel for user online notifications
DELIVERY_QUEUE_PREFIX=queue
OFFLINE_QUEUE_PREFIX=offline

# Kafka Configuration (Phase 1+)
# Enable Kafka for reliable message delivery (default: false)
# Set to true to enable dual-write (Phase 2) or Kafka-only (Phase 6)
KAFKA_ENABLED=false

# Kafka brokers (comma-separated list)
# Development: localhost:9092
# Production: kafka1:9092,kafka2:9092,kafka3:9092
KAFKA_BROKERS=localhost:9092

# Kafka topic for messages (default: construct-messages)
KAFKA_TOPIC=construct-messages

# Kafka consumer group for delivery workers (default: construct-delivery-workers)
KAFKA_CONSUMER_GROUP=construct-delivery-workers

# Kafka Security (optional, for production)
# Enable SSL/TLS encryption
KAFKA_SSL_ENABLED=false

# SASL authentication mechanism (e.g., SCRAM-SHA-256, PLAIN)
# KAFKA_SASL_MECHANISM=SCRAM-SHA-256
# KAFKA_SASL_USERNAME=construct_user
# KAFKA_SASL_PASSWORD=secret
